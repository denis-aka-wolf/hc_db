#!/bin/bash

# Путь к вашему README.md (при необходимости измените)
DOC_FILE="./README.md"

# Проверяем, существует ли файл
if [ ! -f "$DOC_FILE" ]; then
    echo "Файл $DOC_FILE не найден!"
    exit 1
fi

# Получаем дату последнего коммита в формате ДД.ММ.ГГГГ ЧЧ:ММ
LAST_COMMIT_DATE=$(git log -1 --format=%cd --date=format:'%d.%m.%Y %H:%M')

# Обновляем строку «Последнее изменение: ...» в файле
sed -i "s/^Последнее изменение: .*/Последнее изменение: $LAST_COMMIT_DATE/" "$DOC_FILE"

# Добавляем изменённый файл в индекс
git add "$DOC_FILE"

# Пересоздаём коммит с обновлённой датой (без изменения сообщения)
git commit --amend --no-edit --no-verify