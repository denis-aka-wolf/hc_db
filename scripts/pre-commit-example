#!/bin/bash

# Путь к вашему README.md (при необходимости измените)
DOC_FILE="./README.md"

# Проверяем, существует ли файл
if [ ! -f "$DOC_FILE" ]; then
    echo "Файл $DOC_FILE не найден!"
    exit 1
fi

# Получаем дату текущего коммита в формате ДД.ММ.ГГГГ ЧЧ:ММ
# Используем время начала коммита, а не время последнего коммита
CURRENT_COMMIT_DATE=$(date +"%d.%m.%Y %H:%M")

# Обновляем строку «Последнее изменение: ...» в файле
sed -i "s/^Последнее изменение: .*/Последнее изменение: $CURRENT_COMMIT_DATE/" "$DOC_FILE"

# Добавляем изменённый файл в индекс
git add "$DOC_FILE"

# Возвращаемся с успешным статусом
exit 0